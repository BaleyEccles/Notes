:PROPERTIES:
:ID:       cd7bcf51-56d8-4864-9f3d-329bd62a73e1
:END:
#+title: ENG306 - Power Electronics - Lab 1
#+date: [2025-08-07 Thu 15:19]
#+AUTHOR: Baley Eccles - 652137
#+STARTUP: latexpreview
#+FILETAGS: :Assignment:UTAS:2025:TODO:
#+STARTUP: latexpreview
#+LATEX_HEADER: \usepackage[a4paper, margin=2cm]{geometry}
#+LATEX_HEADER_EXTRA: \usepackage{minted}
#+LATEX_HEADER_EXTRA: \usepackage{fontspec}
#+LATEX_HEADER_EXTRA: \setmonofont{Iosevka}
#+LATEX_HEADER_EXTRA: \setminted{fontsize=\small, frame=single, breaklines=true}
#+LATEX_HEADER_EXTRA: \usemintedstyle{emacs}
#+LATEX_HEADER_EXTRA: \usepackage{float}
#+LATEX_HEADER_EXTRA: \setlength{\parindent}{0pt}
#+PROPERTY: header-args :eval no

* ENG306 - Power Electronics - Lab 1
** Part A
*** 2.1
**** 5
/Using oscilloscope cursors in time domain, measure and calculate the phase difference between the two waveforms. Compare with the Lissajous pattern you have plotted with recognised patterns published elsewhere. Save waveforms and include in your lab report./

#+ATTR_LATEX: :placement [H]
#+CAPTION: Phase Difference Plot \label{fig:Phase_Diff}
[[./ENG306_Lab1_PartA_2.1_Phase_Diff.png]]

#+ATTR_LATEX: :placement [H]
#+CAPTION: Lissajous Plot \label{fig:Lissajous}
[[./ENG306_Lab1_PartA_2.1_Lissajous.png]]

:TODO: 
The phase difference was measured to be $\Delta t = 2.47\mu s$.

**** 6
/Record an image of a single pulse (or a train of pulses), showing clearly the shape of the rising and falling edges./

#+ATTR_LATEX: :placement [H]
#+CAPTION: Entire Impulse Plot \label{fig:Impulse_Full}
[[./ENG306_Lab1_PartA_2.1_Impulse_Full.png]]

#+ATTR_LATEX: :placement [H]
#+CAPTION: Impulse Edge Plot \label{fig:Impulse_Edge}
[[./ENG306_Lab1_PartA_2.1_Impulse_Edge.png]]



**** 7
/Record the measured Fourier spectrum. Using cursors measure and record the magnitude of the fundamental and the first 5 major harmonics. Calculate the RMS value of each of these harmonic components (noting that 1 V = 20 dB), tabulate and compare with theoretical values which you can obtain by using Fourier analysis of this waveform./

#+ATTR_LATEX: :placement [H]
#+CAPTION: Fourier Plot \label{fig:Fourier}
[[./ENG306_Lab1_PartA_2.1_Fourier.png]]



#+ATTR_LATEX: :placement [H] :align |c|c|c|c|
#+CAPTION: Recorded Fourier Levels \label{tab:Table_1}
|-----------------+---------------+-------------+-----------------|
| Frequency (kHz) | Voltage (dBV) | Voltage (V) | RMS Voltage (V) |
|-----------------+---------------+-------------+-----------------|
|               1 |          0.98 |      1.1194 |        0.791562 |
|-----------------+---------------+-------------+-----------------|
|               3 |          -8.5 |      0.3758 |        0.265757 |
|-----------------+---------------+-------------+-----------------|
|               5 |         -12.9 |      0.2265 |        0.160135 |
|-----------------+---------------+-------------+-----------------|
|               7 |         -15.9 |      0.1603 |        0.113367 |
|-----------------+---------------+-------------+-----------------|
|               9 |         -17.7 |      0.1303 |        0.092148 |
|-----------------+---------------+-------------+-----------------|
|              11 |         -19.3 |      0.1084 |        0.076645 |
|-----------------+---------------+-------------+-----------------|


#+BEGIN_SRC octave :exports none :results output :session Q7
clc
clear
close all

V_dBV = [0.98, -8.5, -12.9, -15.9, -17.7, -19.3];
V = 10.^(V_dBV./20)
V_rms = V./sqrt(2)

#+END_SRC

#+RESULTS:
: V =
: 
:    1.1194   0.3758   0.2265   0.1603   0.1303   0.1084
: V_rms =
: 
:    0.791562   0.265757   0.160135   0.113367   0.092148   0.076645

A square wave is given by the equation:
\[f(t) = \frac{4A}{\pi}\sum_{n=1,3,5\hdots}^{\infty}\frac{\sin\left(\frac{2\pi n t}{T}\right)}{n}\]
By increasing $n$ by one we increase the harmonic by one and divide its magnitude by $n$.
To check if this holds for our gathered data we must divide our voltage by the harmonic number and compare it with the recorded one.
#+ATTR_LATEX: :placement [H] :align |c|c|c|
#+CAPTION: Calculated And Recorded Fourier Levels Compared \label{tab:Table_2}
|-----------------+------------------+--------------------|
| Harmonic Number | Recorded Voltage | Calculated Voltage |
|-----------------+------------------+--------------------|
|               1 |           1.1194 |             1.1194 |
|-----------------+------------------+--------------------|
|               3 |           0.3758 |             0.3731 |
|-----------------+------------------+--------------------|
|               5 |           0.2265 |             0.2238 |
|-----------------+------------------+--------------------|
|               7 |           0.1603 |             0.1599 |
|-----------------+------------------+--------------------|
|               9 |           0.1303 |             0.1244 |
|-----------------+------------------+--------------------|
|              11 |           0.1084 |             0.1017 |
|-----------------+------------------+--------------------|

As seen in Table \ref{tab:Table_2} the recorded and calculated voltages differ very little. So, it would be safe to say that using Fourier analysis to analyse this is valid.

** Part B

*** 3.2
**** Forward biased diode characteristics
/Present your IV data in table form and also plot a measured IV curve for your diode/

#+ATTR_LATEX: :placement [H] :align |c|c|
#+CAPTION: Forward Diode IV Curve Data \label{tab:Table_3}
|--------------------------+--------------------------|
| Diode current, $I_d$ (A) | Diode Voltage, $V_d$ (V) |
|--------------------------+--------------------------|
|                    0.058 |                    0.686 |
|--------------------------+--------------------------|
|                    0.228 |                    0.732 |
|--------------------------+--------------------------|
|                    0.374 |                    0.755 |
|--------------------------+--------------------------|
|                    0.621 |                    0.778 |
|--------------------------+--------------------------|
|                    0.800 |                    0.788 |
|--------------------------+--------------------------|
|                    1.000 |                    0.795 |
|--------------------------+--------------------------|

#+begin_src python :exports code :results output :session Part_B_1
import numpy as np
import matplotlib.pyplot as plt
from scipy.optimize import curve_fit

# Measured Data
V_measured = np.array([0.686, 0.732, 0.755, 0.778, 0.788, 0.795])
I_measured = np.array([0.058, 0.228, 0.374, 0.621, 0.800, 1.000])

# Diode equation function
def diode_eq(V, Is, n):
    q = 1.602e-19  # Charge of an electron
    k = 1.38e-23   # Boltzmann's constant
    T = 300        # Temperature in Kelvin
    return Is * (np.exp(q * V / (n * k * T)) - 1)

# Fit the data
initial_guess = [1e-12, 1.0]  # Initial guess for Is and n
params, _ = curve_fit(diode_eq, V_measured, I_measured, p0=initial_guess)
Is_fitted, n_fitted = params

# Theoretical data for plotting
V_fitted = np.linspace(min(V_measured), max(V_measured), 100)
I_fitted = diode_eq(V_fitted, Is_fitted, n_fitted)

# Plotting
plt.figure()
plt.plot(V_measured, I_measured, 'ro', label='Measured Data')
plt.plot(V_fitted, I_fitted, 'b-', label='Fitted Curve')
plt.xlabel('Diode Voltage (V)')
plt.ylabel('Diode Current (A)')
plt.title('Measured and Fitted Diode IV Curve')
plt.legend()
plt.grid()
plt.show()

print(f'Fitted reverse saturation current (I_s): {Is_fitted:.2e} A')
print(f'Fitted emission factor (n): {n_fitted:.2f}')
#+end_src

**** Reverse biased diode characteristics
/Present your IV data in table form and also plot a measured IV curve for your diode/

#+ATTR_LATEX: :placement [H] :align |c|c|
#+CAPTION: Reverse Diode IV Curve Data \label{tab:Table_4}
|--------------------------------+------------------------|
| Diode current, $I_d$ ($\mu$ A) | Supply Voltage $V_{dc}$ (V) |
|--------------------------------+------------------------|
|                            0.5 |                      5 |
|--------------------------------+------------------------|
|                            1.0 |                     10 |
|--------------------------------+------------------------|
|                            1.5 |                     15 |
|--------------------------------+------------------------|
|                            2.0 |                     20 |
|--------------------------------+------------------------|
|                            2.5 |                     25 |
|--------------------------------+------------------------|


#+begin_src octave :exports none :results output :session Part_B_2
clc
clear
close all

if exist('OCTAVE_VERSION', 'builtin')
  set(0, "DefaultLineLineWidth", 2);
  set(0, "DefaultAxesFontSize", 25);
end

% Diode IV equation
function I = diode_current(V, I_s, n)
    V_T = 25.85e-3;  % thermal voltage in volts
    I = I_s * (exp(V / (n * V_T)) - 1);
end

% Measured Data
I_d = [0.5, 1.0, 1.5, 2.0, 2.5] * 1e-6;  % convert to A
V_dc = [5, 10, 15, 20, 25];  % in volts

% Curve fitting
initialGuess = [1e-12, 1];  % initial guesses for I_s and n
options = optimset('Display','off');  % suppress output
[popt, ~] = fminunc(@(p) sum((diode_current(V_dc, p(1), p(2)) - I_d).^2), initialGuess, options);

I_s_fit = popt(1);
n_fit = popt(2);

% Generate theoretical curve
V_fit = linspace(0, 30, 1000);
%I_fit = diode_current(V_fit, I_s_fit, n_fit);
I_fit = diode_current(V_fit, 4.0282e-01,  0.3323);

% Plotting
figure;
plot(V_dc, I_d * 1e6, 'o', 'DisplayName', 'Measured Data');  % convert to μA for plotting
hold on;
plot(V_fit, I_fit * 1e6, '-', 'DisplayName', sprintf('Theoretical Fit\nI_s=%.2e, n=%.2f', I_s_fit, n_fit));
title('Measured IV Curve for Diode with Theoretical Fit');
xlabel('Supply Voltage Vdc (V)');
ylabel('Diode Current, I_d (μA)');
grid on;
xlim([0, 30]);
ylim([0, 3]);
legend show;
hold off;
#+end_src

#+RESULTS:
: warning: opengl_renderer: data values greater than float capacity.  (1) Scale data, or (2) Use gnuplot
: warning: opengl_renderer: data values greater than float capacity.  (1) Scale data, or (2) Use gnuplot
: warning: opengl_renderer: data values greater than float capacity.  (1) Scale data, or (2) Use gnuplot
: warning: opengl_renderer: data values greater than float capacity.  (1) Scale data, or (2) Use gnuplot
: warning: opengl_renderer: data values greater than float capacity.  (1) Scale data, or (2) Use gnuplot
: warning: opengl_renderer: data values greater than float capacity.  (1) Scale data, or (2) Use gnuplot

/Using the diode IV function (in lecture slides) try to fit a theoretical curve to your measured data (find a reverse saturation current Is and emission factor n that works)./
:TODO:
Using:
\[I_d = I_s \left( e^{\frac{V_{dc}}{n V_T}} - 1 \right)\]


/Comment on the shape of the curve and on its particular features. What deviations, if any, do you observe, compared to your fitted curve?/
Our data does not fit the expected exponential form, in fact it is perfectly linear, this is due to inaccuracies in the setup. We are attempting to measure micro amps, which was barely possible using the given ammeter.
:TODO: MORE

/Look up the specifications / datasheet for your diode and comment on how they relate to your experiment and observations./

:TODO:

/If this diode were used in a rectifier circuit where it was in its ON state 50% of the time (with a constant current of 0.7 A), what would the diode losses be (assume zero off-state losses)?/
:TODO:


**** Reverse Recovery Characteristics of Diode
/Include in your report the current waveform (and diode voltage) at switch on and switch off. Note how it differs at turn off from what you may have expected under ideal conditions./

#+ATTR_LATEX: :placement [H]
#+CAPTION: Diode Voltage \label{fig:Diode_Voltage}
[[./ENG306_Lab1_PartA_3.2_Diode_Voltage.png]]

#+ATTR_LATEX: :placement [H]
#+CAPTION: Diode Voltage \label{fig:Diode_Current}
[[./ENG306_Lab1_PartA_3.2_Diode_Current.png]]

Under ideal conditions we would expect the diode to instantaneously turn on/off. In Figure \ref{fig:Diode_Current} we can see that this is not true, it takes time for the diode to reach steady state.

/Discuss your observations when the diode turns off. What do you think is happening immediately after the source changes from positive to negative? What do you think might happen if the load was much lower?/
When the diode turns off there is still some energy stored in the silicon in the P-N junction, it takes time for this energy to dissipate. As we see the energy does not instantaneously exit the junction. If the load was lower we would expect less energy to be present in the junction, leading to a quicker dissipation of it.

/Estimate the turn off time for your diode./
From Figure \ref{fig:Diode_Current} we estimate the turnoff time to be about $15\mu s$.

*** 3.3
**** Thyristor Characteristics
/Report and comment on the gate supply voltage required to turn on the thyristor, and on the thyristor voltage observed after turn on./
The voltage required to turn the thyristor on was about $5V$, and once turned on the voltage across the thyristor was approximately $1V$.

/Explain your observations when gate voltage is reduced to zero subsequent to the thyristor being turned on?/
When the gate current was reduced to zero the thyristors current and voltage remained the same.

/What thyristor voltage and current did you measure just prior to thyristor turn off? What is this current value referred to as?/
When the thyristors voltage at turn off was approximately $4V$ and its current was about $20mA$

**** Forward Biased Thyristor Characteristics
/Present your IV data in table form and plot a measured IV curve for your thyristor/

#+ATTR_LATEX: :placement [H] :align |c|c|c|
#+CAPTION: Thyristor IV Curve Data \label{tab:Table_5}
|--------------------------+------------------------------+------------------------------|
| Source Voltage $V_s$ (V) | Thyristor Voltage, $V_T$ (V) | Thyristor current, $I_T$ (A) |
|--------------------------+------------------------------+------------------------------|
|                      5.0 |                        1.031 |                        0.628 |
|--------------------------+------------------------------+------------------------------|
|                      4.5 |                        0.997 |                        0.537 |
|--------------------------+------------------------------+------------------------------|
|                      4.0 |                        0.970 |                        0.466 |
|--------------------------+------------------------------+------------------------------|
|                      3.5 |                        0.902 |                        0.350 |
|--------------------------+------------------------------+------------------------------|
|                      3.0 |                        0.885 |                        0.282 |
|--------------------------+------------------------------+------------------------------|
|                      2.5 |                        0.875 |                        0.223 |
|--------------------------+------------------------------+------------------------------|
|                      2.0 |                        0.852 |                        0.169 |
|--------------------------+------------------------------+------------------------------|
|                      1.5 |                        0.847 |                        0.106 |
|--------------------------+------------------------------+------------------------------|
|                      1.0 |                        1.030 |                        0.000 |
|--------------------------+------------------------------+------------------------------|
|                      0.5 |                        0.500 |                        0.000 |
|--------------------------+------------------------------+------------------------------|


#+begin_src octave :exports none :results output :session Part_3_2
clc
clear
close all

if exist('OCTAVE_VERSION', 'builtin')
  set(0, "DefaultLineLineWidth", 2);
  set(0, "DefaultAxesFontSize", 25);
end

% Data
V_s = [5, 4.5, 4, 3.5, 3, 2.5, 2, 1.5, 1, 0.5];
V_T = [1.031, 0.997, 0.970, 0.902, 0.885, 0.875, 0.852, 0.847, 1.03, 0.5];
I_T = [0.628, 0.5366, 0.466, 0.350, 0.282, 0.223, 0.169, 0.106, 0, 0];


figure;
plot(V_T, I_T, 'o-');
title('Thyristor Voltage vs Source Voltage');
xlabel('Thyristor Voltage $V_T$ (V)', 'Interpreter', 'latex');
ylabel('Thyristor Current $I_T$ (V)', 'Interpreter', 'latex');
grid on;
#+end_src

#+RESULTS:

/Comment on the observed IV characteristics, relating it to theoretical expectations./
The IV plot represents how the voltage and current changes in the thyristor when it is transitioning from an on state to an off state. As the source voltage decreased the thyristor voltage and current decreased. Up until a point when the source voltage is not large enough to keep the thyristor on, then the entire source voltage is across the thyristor, leading to a positive jump in voltage across the thyristor, and zero current through the thyristor.

/Reflect on how this lab session has contributed to your learning experience. How has the lab session influenced your understanding of switching devices used in power electronics?/
:TODO:


:TODO:
|-------------------------------------------|
| STUFF BELOW HERE CAN BE DELETED ONCE DONE |
|-------------------------------------------|
:TODO:

** Part A
vertical mV
horizontal uS

Quick start board:
Sin -1.86V to 1.85V
us and mV/V
90.2kHz
p to p 3.7V

AMP 3.7V
RMS cycle 1.3V
RMS Val 1.28V

They change because they become less accurate

$\Delta t = 2.47\mu s$


FFT levels:
| Hz (k) | level |
|      1 |  0.98 |
|      3 |  -8.5 |
|      5 | -12.9 |
|      7 | -15.9 |
|      9 | -17.7 |
|     11 | -19.3 |

** Part B

*** 3.2

| Diode current | Diode Voltage |
|         0.058 |         0.686 |
|         0.228 |         0.732 |
|         0.374 |         0.755 |
|         0.621 |         0.778 |
|         0.800 |         0.788 |
|             1 |         0.795 |


| Diode current | Supply Voltage |
| 0.5u          |              5 |
| 1.0u          |             10 |
| 1.5u          |             15 |
| 2.0u          |             20 |
| 2.5u          |             25 |

**** Reverse Recovery Characteristics of Diode
We used 10Vpp

*** 3.3
On voltage = 5v
Thyristor voltage = 1v
0.7A
When we reduce Voltage Current and voltage stays same

When turned off
V = 4V
I = 20m

*** 2
| current |   vol |
|     0.5 |     1 |
|    0.46 | 0.973 |
| 0.      |       |


